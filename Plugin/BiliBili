#!name = BiliBili
#!desc = 精简去除广告
#!author = z-jinke,kokoryh,RuCu6
#!icon = https://raw.githubusercontent.com/z-jinke/icon/refs/heads/main/png/bilibili.png
#!system = iOS iPadOS

[Rewrite]
^https:\/\/(app|api)\.bilibili\.com\/x\/(v2\/splash\/show|vip\/ads) reject-dict
^https:\/\/(app|api)\.bilibili\.com\/(x\/mengqi\/v1\/resource|x\/resource\/peak\/download) reject-dict
^https:\/\/(?:app\.bilibili\.com|grpc\.biliapi\.net)\/bilibili\.app\.interface\.v1\.Search\/DefaultWords$ reject-dict
^https:\/\/(?:app\.bilibili\.com|grpc\.biliapi\.net)\/bilibili\.app\.view\.v1\.View\/TFInfo$ url reject-dict

[Script]
http-response ^https:\/\/app\.bilibili\.com\/x\/v2\/splash\/list script-path = https://github.com/z-jinke/Loon/raw/refs/heads/main/Script/bilibili.js, requires-body=true, timeout=60, tag=响应修改
http-response ^https:\/\/app\.bilibili\.com\/x\/v2\/feed\/index script-path = https://github.com/z-jinke/Loon/raw/refs/heads/main/Script/bilibili.js, requires-body=true, timeout=60, tag=响应修改
http-response ^https:\/\/app\.bilibili\.com\/x\/v2\/search\/square\? script-path = https://github.com/z-jinke/Loon/raw/refs/heads/main/Script/bilibili.js, requires-body=true, timeout=60, tag=响应修改
http-response ^https:\/\/app\.bilibili\.com\/x\/resource\/show\/tab\/v2 script-path = https://github.com/z-jinke/Loon/raw/refs/heads/main/Script/bilibili.js, requires-body=true, timeout=60, tag=响应修改
http-response ^https:\/\/app\.bilibili\.com\/x\/v2\/account\/(mine|ipad) script-path = https://github.com/z-jinke/Loon/raw/refs/heads/main/Script/bilibili.js, requires-body=true, timeout=60, tag=响应修改
http-response ^https:\/\/(?:app\.bilibili\.com|grpc\.biliapi\.net)\/bilibili\.app\.(?:playurl\.v1\.PlayURL\/PlayView|playerunite\.v1\.Player\/PlayViewUnite|view\.v1\.View\/(?:View|ViewProgress)|viewunite\.v1\.View\/(?:RelatesFeed|View)|interface\.v1\.Teenagers\/ModeStatus)$ script-path=https://raw.githubusercontent.com/kokoryh/Script/master/js/bilibili.protobuf.js,requires-body=true,binary-body-mode=true,tag=响应修改

[MITM]
hostname = app.bilibili.com,api.bilibili.com,grpc.biliapi.net
